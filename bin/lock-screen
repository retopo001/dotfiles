#!/bin/bash
# Lock screen with i3lock-color (X11)

# Reset keyboard layout
setxkbmap -layout us

# Lock 1Password if running
if pgrep -x "1password" >/dev/null; then
    1password --lock &
fi

# Kill screensaver if running
pkill -f org.bw.screensaver 2>/dev/null

i3lock-color \
    --color=1a1b26 \
    --inside-color=1a1b2600 \
    --ring-color=33ccff \
    --line-uses-ring \
    --keyhl-color=7aa2f7 \
    --bshl-color=f7768e \
    --separator-color=00000000 \
    --insidever-color=1a1b2600 \
    --insidewrong-color=f7768e33 \
    --ringver-color=7aa2f7 \
    --ringwrong-color=f7768e \
    --ind-pos="x+w/2:y+h/2" \
    --radius=20 \
    --ring-width=4 \
    --verif-text="" \
    --wrong-text="" \
    --noinput-text="" \
    --lock-text="" \
    --lockfailed-text="" \
    --date-str="" \
    --time-str="" \
    --nofork
